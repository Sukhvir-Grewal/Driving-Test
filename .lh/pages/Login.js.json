{
    "sourceFile": "pages/Login.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1705773101582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1705773175585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,8 @@\n+import axios from \"axios\";\r\n+import { useRouter } from \"next/router\";\r\n+import { useEffect, useRef, useState } from \"react\";\r\n+import { useForm } from \"react-hook-form\";\r\n export default function Login() {\r\n     return (\r\n         <>\r\n             <div className=\"outer-login-main-container\">\r\n"
                },
                {
                    "date": 1705773185165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,17 @@\n import axios from \"axios\";\r\n import { useRouter } from \"next/router\";\r\n import { useEffect, useRef, useState } from \"react\";\r\n import { useForm } from \"react-hook-form\";\r\n+\r\n export default function Login() {\r\n+    const { register, handleSubmit } = useForm({\r\n+        defaultValues: {\r\n+            username: \"\",\r\n+            password: \"\",\r\n+            confirmPass: \"\",\r\n+        },\r\n+    });\r\n     return (\r\n         <>\r\n             <div className=\"outer-login-main-container\">\r\n                 <div className=\"login-main-container\">\r\n"
                },
                {
                    "date": 1705773218275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,14 @@\n             password: \"\",\r\n             confirmPass: \"\",\r\n         },\r\n     });\r\n+\r\n+    useEffect(() => {\r\n+        hideWarning\r\n+            ? (warningRef.current.style.visibility = \"hidden\")\r\n+            : (warningRef.current.style.visibility = \"visible\");\r\n+    }, [hideWarning]);\r\n     return (\r\n         <>\r\n             <div className=\"outer-login-main-container\">\r\n                 <div className=\"login-main-container\">\r\n"
                },
                {
                    "date": 1705773225585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,10 @@\n import { useEffect, useRef, useState } from \"react\";\r\n import { useForm } from \"react-hook-form\";\r\n \r\n export default function Login() {\r\n+    const [hideWarning, setHideWarning] = useState(true);\r\n+    \r\n     const { register, handleSubmit } = useForm({\r\n         defaultValues: {\r\n             username: \"\",\r\n             password: \"\",\r\n"
                },
                {
                    "date": 1705773261003,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import { useForm } from \"react-hook-form\";\r\n \r\n export default function Login() {\r\n     const [hideWarning, setHideWarning] = useState(true);\r\n-    \r\n+\r\n     const { register, handleSubmit } = useForm({\r\n         defaultValues: {\r\n             username: \"\",\r\n             password: \"\",\r\n@@ -23,8 +23,12 @@\n         <>\r\n             <div className=\"outer-login-main-container\">\r\n                 <div className=\"login-main-container\">\r\n                     <div className=\"login-container\">Welcome Back</div>\r\n+                    <div\r\n+                        ref={warningRef}\r\n+                        className=\"register-warning-container\"\r\n+                    ></div>\r\n                     <div className=\"username-main-container\">\r\n                         <div className=\"login-username-container\">username</div>\r\n                         <div className=\"input-username-main-container\">\r\n                             <input className=\"input-boxes\"></input>\r\n"
                },
                {
                    "date": 1705773277698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import { useEffect, useRef, useState } from \"react\";\r\n import { useForm } from \"react-hook-form\";\r\n \r\n export default function Login() {\r\n-    const warningRef = userref\r\n+    const warningRef = userre\r\n     const [hideWarning, setHideWarning] = useState(true);\r\n \r\n     const { register, handleSubmit } = useForm({\r\n         defaultValues: {\r\n"
                },
                {
                    "date": 1705773403096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,144 @@\n+import axios from \"axios\";\r\n+import { useRouter } from \"next/router\";\r\n+import { useEffect, useRef, useState } from \"react\";\r\n+import { useForm } from \"react-hook-form\";\r\n+\r\n+export default function Register() {\r\n+    const router = useRouter();\r\n+    const [doesMatch, setDoesMatch] = useState(true);\r\n+    const [nameDoesMatch, setNameDoesMatch] = useState(false);\r\n+    const [hideWarning, setHideWarning] = useState(true);\r\n+    const [showPassword, setShowPassword] = useState(false);\r\n+    const [showPasswordConfirm, setShowPasswordConfirm] = useState(false);\r\n+    const [loading, setLoading] = useState(false);   \r\n+\r\n+    const warningRef = useRef(null);\r\n+\r\n+    const { register, handleSubmit } = useForm({\r\n+        defaultValues: {\r\n+            username: \"\",\r\n+            password: \"\",\r\n+            confirmPass: \"\",\r\n+        },\r\n+    });\r\n+\r\n+    useEffect(() => {\r\n+        hideWarning\r\n+            ? (warningRef.current.style.visibility = \"hidden\")\r\n+            : (warningRef.current.style.visibility = \"visible\");\r\n+    }, [hideWarning]);\r\n+\r\n+    const registerUser = async (username, password) => {\r\n+        try {\r\n+            setLoading(true);\r\n+            await axios.post(\"/api/auth/register\", { username, password });\r\n+            router.push(\"/Login\");\r\n+            console.log(\"User Added\");\r\n+        } catch (error) {\r\n+            setNameDoesMatch(true);\r\n+            setHideWarning(() => {\r\n+                warningRef.current.innerHTML = \"User name already exists\";\r\n+                return false;\r\n+            });\r\n+        } finally {\r\n+            setLoading(false);\r\n+        }\r\n+    };\r\n+\r\n+    const submitForm = async (data) => {\r\n+        if (data.password !== data.confirmPass) {\r\n+            setDoesMatch(false);\r\n+            setHideWarning(() => {\r\n+                warningRef.current.innerHTML = \"Password does not match\";\r\n+                return false;\r\n+            });\r\n+        } else {\r\n+            setDoesMatch(true);\r\n+            await registerUser(data.username, data.password);\r\n+        }\r\n+    };\r\n+\r\n+    const renderInput = (type, showPasswordState) => (\r\n+        <>\r\n+            <input\r\n+                type={showPasswordState ? \"text\" : \"password\"}\r\n+                onFocus={() => {\r\n+                    setDoesMatch(true);\r\n+                    setHideWarning(true);\r\n+                }}\r\n+                {...register(type)}\r\n+                className={\r\n+                    doesMatch ? `input-password` : `input-password red-border`\r\n+                }\r\n+                required\r\n+            />\r\n+            <i\r\n+                className={\r\n+                    showPasswordState\r\n+                        ? \"fa-regular fa-eye-slash eye\"\r\n+                        : \"fa-regular fa-eye eye\"\r\n+                }\r\n+                onClick={() => {\r\n+                    if (type === \"password\") {\r\n+                        setShowPassword(!showPassword);\r\n+                    } else if (type === \"confirmPass\") {\r\n+                        setShowPasswordConfirm(!showPasswordConfirm);\r\n+                    }\r\n+                }}\r\n+            ></i>\r\n+        </>\r\n+    );\r\n+\r\n+    return (\r\n+        <>\r\n+            <div className=\"outer-register-main-container\">\r\n+                <form\r\n+                    onSubmit={handleSubmit(submitForm)}\r\n+                    className=\"register-main-container\"\r\n+                >\r\n+                    <div className=\"register-container\">WelcomeBack</div>\r\n+                    <div\r\n+                        ref={warningRef}\r\n+                        className=\"register-warning-container\"\r\n+                    ></div>\r\n+                    <div className=\"all-options\">\r\n+                        <div className=\"outer-username-option\">\r\n+                            <div className=\"register-username\">username</div>\r\n+                            <div className=\"input-username-container\">\r\n+                                <input\r\n+                                    onFocus={() => {\r\n+                                        setNameDoesMatch(false);\r\n+                                        setHideWarning(true);\r\n+                                    }}\r\n+                                    {...register(\"username\")}\r\n+                                    className={\r\n+                                        nameDoesMatch\r\n+                                            ? `input-username red-border`\r\n+                                            : `input-username `\r\n+                                    }\r\n+                                    required\r\n+                                ></input>\r\n+                            </div>\r\n+                        </div>\r\n+                        <div className=\"outer-password-option\">\r\n+                            <div className=\"register-password\">password</div>\r\n+                            <div className=\"input-password-container\">\r\n+                                {renderInput(\"password\", showPassword)}\r\n+                            </div>\r\n+                        </div>\r\n+                        \r\n+                        <div className=\"register-button-container\">\r\n+                            <button\r\n+                                type=\"submit\"\r\n+                                className=\"register-button\"\r\n+                                disabled={loading}\r\n+                            >\r\n+                                {loading ? \"Login...\" : \"logning\"}\r\n+                            </button>\r\n+                        </div>\r\n+                    </div>\r\n+                </form>\r\n+            </div>\r\n+        </>\r\n+    );\r\n+}\r\n"
                }
            ],
            "date": 1705773101582,
            "name": "Commit-0",
            "content": "export default function Login() {\r\n    return (\r\n        <>\r\n            <div className=\"outer-login-main-container\">\r\n                <div className=\"login-main-container\">\r\n                    <div className=\"login-container\">Welcome Back</div>\r\n                    <div className=\"username-main-container\">\r\n                        <div className=\"login-username-container\">username</div>\r\n                        <div className=\"input-username-main-container\">\r\n                            <input className=\"input-boxes\"></input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"password-main-container\">\r\n                        <div className=\"login-password-container\">password</div>\r\n                        <div className=\"input-password-main-container\">\r\n                            <input className=\"input-boxes\"></input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"login-button-container\">\r\n                        <button className=\"login-button\">login</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"
        }
    ]
}